# RAS DASH Database Data Dictionary

## Overview
This document provides a comprehensive data dictionary for the RAS DASH (Cyber Security as a Service) platform database. The database is built on PostgreSQL and uses Drizzle ORM for schema management.

## Database Information
- **Database Type**: PostgreSQL
- **ORM**: Drizzle ORM with TypeScript
- **Schema Location**: `shared/schema.ts`, `shared/workflow-schema.ts`, `shared/stig-schema.ts`, `shared/data-simulation-schema.ts`
- **Total Tables**: 50+ tables organized by functional domains

---

## Table Categories

### 1. User Management & Authentication
### 2. Data Ingestion System
### 3. Dashboard Builder System
### 4. Vulnerability Management
### 5. Compliance & Controls Management
### 6. STIG Management System
### 7. Workflow Automation
### 8. AI & Analytics
### 9. Document Generation
### 10. Data Simulation & Testing

---

## 1. USER MANAGEMENT & AUTHENTICATION

### `users`
Primary user authentication and profile management.

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| id | SERIAL | NO | Auto-increment | Primary key |
| username | TEXT | NO | - | Unique username for login |
| password | TEXT | NO | - | Hashed password |
| first_name | TEXT | YES | - | User's first name |
| last_name | TEXT | YES | - | User's last name |
| email | TEXT | YES | - | Email address |
| created_at | TIMESTAMP | NO | NOW() | Account creation timestamp |
| updated_at | TIMESTAMP | NO | NOW() | Last update timestamp |
| auth_method | TEXT | NO | 'password' | Authentication method (password, certificate) |
| certificate_subject | TEXT | YES | - | PKI certificate subject |
| certificate_expiry | TIMESTAMP | YES | - | Certificate expiration date |
| role | TEXT | NO | 'user' | User role (user, admin, super_admin) |
| status | TEXT | NO | 'active' | Account status (active, inactive, suspended) |

**Indexes**: username (unique), email, status

### `access_requests`
User access request management for new account approvals.

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| id | SERIAL | NO | Auto-increment | Primary key |
| email | TEXT | NO | - | Requestor email |
| first_name | TEXT | NO | - | Requestor first name |
| last_name | TEXT | NO | - | Requestor last name |
| status | ENUM | NO | 'pending' | Request status (pending, approved, rejected) |
| reason | TEXT | YES | - | Reason for access request |
| rejection_reason | TEXT | YES | - | Reason for rejection if applicable |
| created_at | TIMESTAMP | NO | NOW() | Request creation timestamp |
| updated_at | TIMESTAMP | NO | NOW() | Last update timestamp |
| processed_at | TIMESTAMP | YES | - | Processing completion timestamp |
| processed_by | INTEGER | YES | - | User ID who processed request |

**Foreign Keys**: processed_by → users(id)

---

## 2. DATA INGESTION SYSTEM

### `ingestion_batches`
Tracks data ingestion batch operations from external systems.

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| id | SERIAL | NO | Auto-increment | Primary key |
| batch_id | UUID | NO | - | Unique batch identifier |
| source_system | VARCHAR(50) | NO | - | Source system (tenable, xacta, manual) |
| batch_type | VARCHAR(50) | YES | - | Type of batch operation |
| file_name | VARCHAR(255) | YES | - | Source file name if applicable |
| total_records | INTEGER | YES | - | Total records in batch |
| successful_records | INTEGER | NO | 0 | Successfully processed records |
| failed_records | INTEGER | NO | 0 | Failed processing records |
| status | VARCHAR(50) | NO | 'in_progress' | Batch status |
| started_at | TIMESTAMP | NO | NOW() | Batch start timestamp |
| completed_at | TIMESTAMP | YES | - | Batch completion timestamp |
| error_details | TEXT | YES | - | Error details if failed |
| created_by | INTEGER | YES | - | User who initiated batch |
| metadata | JSONB | YES | - | Additional batch metadata |

**Indexes**: batch_id (unique), source_system, status

### `ingestion_systems`
System information from ingested data sources.

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| id | SERIAL | NO | Auto-increment | Primary key |
| system_id | VARCHAR(50) | NO | - | External system identifier |
| name | VARCHAR(255) | NO | - | System name |
| uuid | UUID | NO | - | Unique system UUID |
| status | VARCHAR(50) | YES | - | System operational status |
| authorization_boundary | TEXT | YES | - | Security authorization boundary |
| system_type | VARCHAR(100) | YES | - | Type of system |
| responsible_organization | VARCHAR(255) | YES | - | Responsible organization |
| system_owner | VARCHAR(255) | YES | - | System owner |
| information_system_security_officer | VARCHAR(255) | YES | - | ISSO contact |
| authorizing_official | VARCHAR(255) | YES | - | AO contact |
| last_assessment_date | TIMESTAMP | YES | - | Last security assessment |
| authorization_date | TIMESTAMP | YES | - | ATO grant date |
| authorization_termination_date | TIMESTAMP | YES | - | ATO expiration date |
| created_at | TIMESTAMP | NO | NOW() | Record creation timestamp |
| updated_at | TIMESTAMP | NO | NOW() | Last update timestamp |
| ingestion_source | VARCHAR(50) | YES | - | Source of ingestion |
| ingestion_batch_id | UUID | YES | - | Related batch ID |
| raw_json | JSONB | YES | - | Raw ingested data |

**Indexes**: system_id, uuid (unique), name

### `ingestion_assets`
Asset information from external systems.

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| id | SERIAL | NO | Auto-increment | Primary key |
| asset_uuid | UUID | NO | - | Unique asset identifier |
| hostname | VARCHAR(255) | YES | - | Asset hostname |
| netbios_name | VARCHAR(100) | YES | - | NetBIOS name |
| system_id | VARCHAR(50) | YES | - | Associated system ID |
| has_agent | BOOLEAN | YES | - | Whether agent is installed |
| has_plugin_results | BOOLEAN | YES | - | Whether plugin results exist |
| first_seen | TIMESTAMP | YES | - | First discovery timestamp |
| last_seen | TIMESTAMP | YES | - | Last seen timestamp |
| exposure_score | INTEGER | YES | - | Security exposure score |
| acr_score | DECIMAL(3,1) | YES | - | Asset Criticality Rating |
| criticality_rating | VARCHAR(20) | YES | - | Criticality classification |
| created_at | TIMESTAMP | NO | NOW() | Record creation timestamp |
| updated_at | TIMESTAMP | NO | NOW() | Last update timestamp |
| ingestion_source | VARCHAR(50) | YES | - | Source of ingestion |
| ingestion_batch_id | UUID | YES | - | Related batch ID |
| raw_json | JSONB | YES | - | Raw ingested data |

**Indexes**: asset_uuid (unique), hostname, system_id

### `ingestion_vulnerabilities`
Vulnerability data from security scanning tools.

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| id | SERIAL | NO | Auto-increment | Primary key |
| batch_id | UUID | YES | - | Related ingestion batch |
| plugin_id | VARCHAR(50) | NO | - | Scanner plugin ID |
| vulnerability_name | VARCHAR(500) | NO | - | Vulnerability name |
| severity | VARCHAR(20) | NO | - | Severity level (Critical, High, Medium, Low) |
| cvss_score | DECIMAL(4,2) | YES | - | CVSS score |
| cvss_vector | VARCHAR(200) | YES | - | CVSS vector string |
| description | TEXT | YES | - | Vulnerability description |
| solution | TEXT | YES | - | Remediation solution |
| state | VARCHAR(20) | YES | - | Vulnerability state |
| first_found | TIMESTAMP | YES | - | First discovery timestamp |
| last_found | TIMESTAMP | YES | - | Last found timestamp |
| asset_uuid | VARCHAR(255) | NO | - | Affected asset UUID |
| poam_id | INTEGER | YES | - | Related POAM ID |
| control_id | INTEGER | YES | - | Related control ID |
| raw_data | JSONB | YES | - | Raw scanner data |
| created_at | TIMESTAMP | NO | NOW() | Record creation timestamp |
| updated_at | TIMESTAMP | NO | NOW() | Last update timestamp |

**Indexes**: asset_uuid, severity, plugin_id, batch_id

---

## 3. DASHBOARD BUILDER SYSTEM

### `dashboards`
User-created dashboard configurations.

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| id | SERIAL | NO | Auto-increment | Primary key |
| name | VARCHAR(255) | NO | - | Dashboard name |
| description | TEXT | YES | - | Dashboard description |
| layout | JSONB | NO | '{"nodes": [], "edges": []}' | ReactFlow layout data |
| is_default | BOOLEAN | NO | false | Whether this is the default dashboard |
| created_by | INTEGER | YES | - | Creator user ID |
| created_at | TIMESTAMP | NO | NOW() | Creation timestamp |
| updated_at | TIMESTAMP | NO | NOW() | Last update timestamp |

**Foreign Keys**: created_by → users(id)

### `dashboard_widgets`
Individual widgets within dashboards.

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| id | SERIAL | NO | Auto-increment | Primary key |
| dashboard_id | INTEGER | YES | - | Parent dashboard ID |
| metric_id | INTEGER | YES | - | Associated metric ID |
| position_x | DECIMAL(10,2) | NO | - | X coordinate position |
| position_y | DECIMAL(10,2) | NO | - | Y coordinate position |
| width | INTEGER | NO | 300 | Widget width in pixels |
| height | INTEGER | NO | 200 | Widget height in pixels |
| widget_config | JSONB | NO | '{}' | Widget configuration settings |
| created_at | TIMESTAMP | NO | NOW() | Creation timestamp |

**Foreign Keys**: dashboard_id → dashboards(id) ON DELETE CASCADE

### `widget_templates`
Reusable widget templates and configurations.

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| id | SERIAL | NO | Auto-increment | Primary key |
| name | VARCHAR(255) | NO | - | Template name |
| description | TEXT | YES | - | Template description |
| chart_type | VARCHAR(100) | NO | - | Chart type (bar, line, pie, etc.) |
| template_config | JSONB | NO | '{}' | Template configuration |
| size_preset | VARCHAR(50) | NO | 'medium' | Size preset (small, medium, large) |
| color_scheme | VARCHAR(50) | NO | 'default' | Color scheme identifier |
| is_system | BOOLEAN | NO | false | Whether this is a system template |
| created_by | INTEGER | YES | - | Creator user ID |
| created_at | TIMESTAMP | NO | NOW() | Creation timestamp |
| updated_at | TIMESTAMP | NO | NOW() | Last update timestamp |

**Foreign Keys**: created_by → users(id)

### `dashboard_themes`
Dashboard visual themes and styling.

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| id | SERIAL | NO | Auto-increment | Primary key |
| name | VARCHAR(255) | NO | - | Theme name |
| description | TEXT | YES | - | Theme description |
| theme_config | JSONB | NO | '{}' | Theme configuration |
| color_palette | JSONB | NO | '{}' | Color palette definition |
| typography | JSONB | NO | '{}' | Typography settings |
| grid_settings | JSONB | NO | '{}' | Grid configuration |
| is_system | BOOLEAN | NO | true | Whether this is a system theme |
| created_by | INTEGER | YES | - | Creator user ID |
| created_at | TIMESTAMP | NO | NOW() | Creation timestamp |
| updated_at | TIMESTAMP | NO | NOW() | Last update timestamp |

**Foreign Keys**: created_by → users(id)

---

## 4. VULNERABILITY MANAGEMENT

### `vulnerabilities`
Central vulnerability tracking and management.

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| id | SERIAL | NO | Auto-increment | Primary key |
| cve_id | VARCHAR(20) | YES | - | CVE identifier |
| vulnerability_name | VARCHAR(500) | NO | - | Vulnerability name |
| description | TEXT | YES | - | Detailed description |
| severity | VARCHAR(20) | NO | - | Severity level |
| cvss_score | DECIMAL(4,2) | YES | - | CVSS base score |
| cvss_vector | VARCHAR(200) | YES | - | CVSS vector |
| solution | TEXT | YES | - | Remediation solution |
| plugin_id | VARCHAR(50) | YES | - | Scanner plugin ID |
| first_found | TIMESTAMP | YES | - | First discovery |
| last_found | TIMESTAMP | YES | - | Last found |
| status | VARCHAR(50) | NO | 'open' | Vulnerability status |
| asset_id | INTEGER | YES | - | Affected asset |
| system_id | VARCHAR(50) | YES | - | Affected system |
| poam_id | INTEGER | YES | - | Related POAM |
| remediation_priority | INTEGER | YES | - | Remediation priority (1-5) |
| estimated_cost | DECIMAL(10,2) | YES | - | Estimated remediation cost |
| created_at | TIMESTAMP | NO | NOW() | Creation timestamp |
| updated_at | TIMESTAMP | NO | NOW() | Last update timestamp |

**Indexes**: cve_id, severity, status, asset_id

---

## 5. COMPLIANCE & CONTROLS MANAGEMENT

### `ingestion_controls`
Security controls from compliance frameworks.

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| id | SERIAL | NO | Auto-increment | Primary key |
| system_id | VARCHAR(50) | YES | - | Associated system ID |
| control_id | VARCHAR(100) | NO | - | Control identifier (AC-1, AU-2, etc.) |
| control_title | VARCHAR(500) | NO | - | Control title |
| family | VARCHAR(100) | YES | - | Control family |
| priority | VARCHAR(10) | YES | - | Implementation priority |
| implementation_status | VARCHAR(50) | YES | - | Implementation status |
| assessment_status | VARCHAR(50) | YES | - | Assessment status |
| responsible_role | VARCHAR(255) | YES | - | Responsible role/person |
| last_assessed | TIMESTAMP | YES | - | Last assessment date |
| implementation_guidance | TEXT | YES | - | Implementation guidance |
| residual_risk | VARCHAR(50) | YES | - | Residual risk level |
| created_at | TIMESTAMP | NO | NOW() | Creation timestamp |
| updated_at | TIMESTAMP | NO | NOW() | Last update timestamp |
| ingestion_source | VARCHAR(50) | YES | - | Source of data |
| ingestion_batch_id | UUID | YES | - | Related batch ID |
| raw_json | JSONB | YES | - | Raw source data |

**Indexes**: control_id, family, system_id

### `ingestion_poams`
Plan of Action & Milestones tracking.

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| id | SERIAL | NO | Auto-increment | Primary key |
| poam_id | VARCHAR(100) | NO | - | POAM identifier |
| system_id | VARCHAR(50) | YES | - | Associated system |
| weakness_description | TEXT | NO | - | Description of weakness |
| source | TEXT | YES | - | Source of finding |
| security_control | VARCHAR(100) | YES | - | Related security control |
| resources | TEXT | YES | - | Required resources |
| scheduled_completion | TIMESTAMP | YES | - | Target completion date |
| poc | VARCHAR(255) | YES | - | Point of contact |
| status | VARCHAR(50) | YES | - | POAM status |
| risk_rating | VARCHAR(50) | YES | - | Risk rating |
| deviation_rationale | TEXT | YES | - | Deviation rationale |
| original_detection_date | TIMESTAMP | YES | - | Original detection date |
| weakness_severity | VARCHAR(50) | YES | - | Severity level |
| residual_risk | VARCHAR(50) | YES | - | Residual risk level |
| threat_relevance | VARCHAR(50) | YES | - | Threat relevance |
| likelihood | VARCHAR(50) | YES | - | Likelihood assessment |
| impact | VARCHAR(50) | YES | - | Impact assessment |
| mitigation_strategy | TEXT | YES | - | Mitigation strategy |
| cost_estimate | VARCHAR(100) | YES | - | Cost estimate |
| created_at | TIMESTAMP | NO | NOW() | Creation timestamp |
| updated_at | TIMESTAMP | NO | NOW() | Last update timestamp |
| ingestion_source | VARCHAR(50) | YES | - | Source of data |
| ingestion_batch_id | UUID | YES | - | Related batch ID |
| raw_json | JSONB | YES | - | Raw source data |

**Indexes**: poam_id, system_id, status

---

## 6. STIG MANAGEMENT SYSTEM

### `stig_mappings`
STIG to system/application mappings.

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| id | SERIAL | NO | Auto-increment | Primary key |
| operating_system | VARCHAR(255) | YES | - | Target operating system |
| os_version | VARCHAR(100) | YES | - | OS version |
| application_name | VARCHAR(255) | YES | - | Application name |
| application_version | VARCHAR(100) | YES | - | Application version |
| system_type | VARCHAR(100) | YES | - | System type |
| stig_id | VARCHAR(100) | NO | - | STIG identifier |
| stig_title | VARCHAR(500) | NO | - | STIG title |
| stig_version | VARCHAR(50) | YES | - | STIG version |
| priority | INTEGER | NO | 1 | Mapping priority |
| download_url | VARCHAR(1000) | YES | - | Download URL |
| file_type | VARCHAR(20) | NO | 'zip' | File type |
| confidence_score | INTEGER | NO | 100 | Confidence in mapping (0-100) |
| created_at | TIMESTAMP | NO | NOW() | Creation timestamp |
| updated_at | TIMESTAMP | NO | NOW() | Last update timestamp |

**Indexes**: stig_id, operating_system, application_name

### `stig_downloads`
STIG download tracking and management.

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| id | UUID | NO | Auto-generated | Primary key |
| stig_id | VARCHAR(100) | NO | - | STIG identifier |
| stig_title | VARCHAR(500) | NO | - | STIG title |
| version | VARCHAR(50) | YES | - | STIG version |
| release_date | TIMESTAMP | YES | - | Release date |
| download_url | VARCHAR(1000) | YES | - | Download URL |
| local_path | VARCHAR(500) | YES | - | Local file path |
| file_size | INTEGER | YES | - | File size in bytes |
| download_status | VARCHAR(50) | NO | 'pending' | Download status |
| downloaded_at | TIMESTAMP | YES | - | Download completion |
| last_checked | TIMESTAMP | YES | - | Last update check |
| checksum | VARCHAR(64) | YES | - | File checksum |
| metadata | JSONB | YES | - | Additional metadata |
| created_at | TIMESTAMP | NO | NOW() | Creation timestamp |
| updated_at | TIMESTAMP | NO | NOW() | Last update timestamp |

**Indexes**: stig_id, download_status

---

## 7. WORKFLOW AUTOMATION

### `workflows`
Visual workflow definitions and configurations.

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| id | UUID | NO | Auto-generated | Primary key |
| name | VARCHAR(255) | NO | - | Workflow name |
| description | TEXT | YES | - | Workflow description |
| category | VARCHAR(100) | NO | 'custom' | Workflow category |
| version | VARCHAR(20) | NO | '1.0.0' | Version number |
| workflow_data | JSONB | NO | - | ReactFlow nodes and edges |
| is_active | BOOLEAN | NO | true | Whether workflow is active |
| is_template | BOOLEAN | NO | false | Whether this is a template |
| tags | JSONB | YES | - | Workflow tags array |
| configuration | JSONB | YES | - | Workflow configuration |
| created_by | VARCHAR(100) | YES | - | Creator identifier |
| updated_by | VARCHAR(100) | YES | - | Last updater |
| created_at | TIMESTAMP | NO | NOW() | Creation timestamp |
| updated_at | TIMESTAMP | NO | NOW() | Last update timestamp |

**Indexes**: name, category, is_active

### `workflow_instances`
Workflow execution instances and tracking.

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| id | UUID | NO | Auto-generated | Primary key |
| workflow_id | UUID | YES | - | Parent workflow ID |
| status | VARCHAR(50) | NO | - | Execution status |
| priority | VARCHAR(20) | NO | 'normal' | Execution priority |
| started_at | TIMESTAMP | NO | NOW() | Start timestamp |
| completed_at | TIMESTAMP | YES | - | Completion timestamp |
| paused_at | TIMESTAMP | YES | - | Pause timestamp |
| progress | INTEGER | NO | 0 | Progress percentage (0-100) |
| current_step | VARCHAR(100) | YES | - | Current execution step |
| execution_context | JSONB | YES | - | Execution context data |
| output_data | JSONB | YES | - | Final output data |
| error_details | TEXT | YES | - | Error details if failed |
| triggered_by | VARCHAR(100) | YES | - | Trigger source |
| trigger_source | VARCHAR(100) | YES | - | Trigger type |
| execution_metrics | JSONB | YES | - | Performance metrics |
| created_at | TIMESTAMP | NO | NOW() | Creation timestamp |
| updated_at | TIMESTAMP | NO | NOW() | Last update timestamp |

**Foreign Keys**: workflow_id → workflows(id)

---

## 8. AI & ANALYTICS

### `ai_chat_sessions`
AI chat session tracking and management.

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| id | SERIAL | NO | Auto-increment | Primary key |
| session_id | UUID | NO | - | Unique session identifier |
| user_id | INTEGER | YES | - | Associated user ID |
| title | VARCHAR(255) | YES | - | Session title |
| created_at | TIMESTAMP | NO | NOW() | Creation timestamp |
| updated_at | TIMESTAMP | NO | NOW() | Last update timestamp |
| last_activity_at | TIMESTAMP | NO | NOW() | Last activity timestamp |
| is_active | BOOLEAN | NO | true | Whether session is active |
| session_metadata | JSONB | YES | - | Session metadata |

**Foreign Keys**: user_id → users(id)

### `ai_chat_messages`
Individual AI chat messages within sessions.

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| id | SERIAL | NO | Auto-increment | Primary key |
| session_id | UUID | YES | - | Parent session ID |
| message_type | VARCHAR(20) | NO | - | Message type (user, assistant, system) |
| content | TEXT | NO | - | Message content |
| sql_query | TEXT | YES | - | Generated SQL query if applicable |
| query_results | JSONB | YES | - | Query results if applicable |
| ai_model | VARCHAR(50) | YES | - | AI model used |
| processing_time_ms | INTEGER | YES | - | Processing time in milliseconds |
| created_at | TIMESTAMP | NO | NOW() | Creation timestamp |
| metadata | JSONB | YES | - | Message metadata |

**Foreign Keys**: session_id → ai_chat_sessions(session_id)

---

## 9. DOCUMENT GENERATION

### `requirement_documents`
Generated requirement documents and specifications.

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| id | SERIAL | NO | Auto-increment | Primary key |
| uuid | UUID | NO | Auto-generated | Unique document identifier |
| title | VARCHAR(500) | NO | - | Document title |
| description | TEXT | YES | - | Document description |
| system_id | VARCHAR(255) | NO | - | Associated system ID |
| system_name | VARCHAR(255) | NO | - | System name |
| asset_ids | JSONB | NO | - | Array of asset IDs |
| document_type | VARCHAR(100) | NO | 'security_requirements' | Document type |
| status | VARCHAR(50) | NO | 'draft' | Document status |
| template_type | VARCHAR(100) | YES | - | Template used |
| generated_content | TEXT | YES | - | Generated content |
| ai_prompt | TEXT | YES | - | AI prompt used |
| ai_model | VARCHAR(50) | YES | - | AI model used |
| generation_metadata | JSONB | YES | - | Generation metadata |
| gitlab_project_id | VARCHAR(100) | YES | - | GitLab project ID |
| gitlab_issue_url | VARCHAR(500) | YES | - | GitLab issue URL |
| created_by | INTEGER | YES | - | Creator user ID |
| updated_by | INTEGER | YES | - | Last updater user ID |
| created_at | TIMESTAMP | NO | NOW() | Creation timestamp |
| updated_at | TIMESTAMP | NO | NOW() | Last update timestamp |
| published_at | TIMESTAMP | YES | - | Publication timestamp |

**Foreign Keys**: created_by → users(id), updated_by → users(id)

---

## 10. DATA SIMULATION & TESTING

### `data_simulation_jobs`
Data simulation job configurations.

| Column | Type | Nullable | Default | Description |
|--------|------|----------|---------|-------------|
| id | UUID | NO | Auto-generated | Primary key |
| job_name | VARCHAR(255) | NO | - | Job name |
| source_system | VARCHAR(50) | NO | - | Source system (tenable, xacta) |
| data_type | VARCHAR(50) | NO | - | Data type to simulate |
| schedule_cron | VARCHAR(100) | YES | - | Cron schedule expression |
| is_active | BOOLEAN | NO | true | Whether job is active |
| data_source_type | VARCHAR(20) | NO | - | Source type (file, generated, api) |
| data_source_config | JSONB | YES | - | Source configuration |
| record_count | INTEGER | NO | 100 | Number of records to generate |
| variation_percentage | NUMERIC(5,2) | NO | 10.00 | Data variation percentage |
| enable_bidirectional | BOOLEAN | NO | false | Enable bidirectional simulation |
| bidirectional_config | JSONB | YES | - | Bidirectional configuration |
| last_execution_at | TIMESTAMP | YES | - | Last execution timestamp |
| next_execution_at | TIMESTAMP | YES | - | Next execution timestamp |
| execution_count | INTEGER | NO | 0 | Total execution count |
| created_by | VARCHAR(100) | YES | - | Creator identifier |
| created_at | TIMESTAMP | NO | NOW() | Creation timestamp |
| updated_at | TIMESTAMP | NO | NOW() | Last update timestamp |
| status | VARCHAR(20) | NO | 'active' | Job status |
| last_error | TEXT | YES | - | Last error message |

**Indexes**: job_name, source_system, is_active

---

## Database Relationships

### Key Foreign Key Relationships

1. **User Relationships**
   - access_requests.processed_by → users.id
   - dashboards.created_by → users.id
   - widget_templates.created_by → users.id
   - dashboard_themes.created_by → users.id

2. **Dashboard Relationships**
   - dashboard_widgets.dashboard_id → dashboards.id (CASCADE DELETE)
   - dashboard_widgets.metric_id → metrics.id

3. **Ingestion Relationships**
   - ingestion_vulnerabilities.batch_id → ingestion_batches.batch_id
   - ingestion_vulnerability_cves.vulnerability_id → ingestion_vulnerabilities.id
   - ingestion_patches.vulnerability_id → ingestion_vulnerabilities.id

4. **Workflow Relationships**
   - workflow_nodes.workflow_id → workflows.id (CASCADE DELETE)
   - workflow_edges.workflow_id → workflows.id (CASCADE DELETE)
   - workflow_instances.workflow_id → workflows.id
   - workflow_executions.instance_id → workflow_instances.id (CASCADE DELETE)

5. **STIG Relationships**
   - stig_assets.collection_id → stig_collections.id (CASCADE DELETE)
   - stig_asset_assignments.asset_id → stig_assets.id (CASCADE DELETE)
   - stig_reviews.asset_id → stig_assets.id (CASCADE DELETE)
   - stig_reviews.rule_id → stig_rules.id (CASCADE DELETE)

6. **AI & Analytics Relationships**
   - ai_chat_sessions.user_id → users.id
   - ai_chat_messages.session_id → ai_chat_sessions.session_id

---

## Indexes and Performance

### Primary Indexes
- All tables have primary key indexes (usually on `id` field)
- Unique constraints on critical fields (usernames, UUIDs, etc.)

### Secondary Indexes
- **Performance Indexes**: Created on frequently queried fields
- **Foreign Key Indexes**: Automatic indexes on foreign key columns
- **Composite Indexes**: Multi-column indexes for complex queries

### Recommended Additional Indexes
```sql
-- Vulnerability management performance
CREATE INDEX idx_vulnerabilities_severity_status ON vulnerabilities(severity, status);
CREATE INDEX idx_vulnerabilities_asset_system ON vulnerabilities(asset_id, system_id);

-- Dashboard performance
CREATE INDEX idx_dashboard_widgets_dashboard_metric ON dashboard_widgets(dashboard_id, metric_id);

-- Ingestion performance
CREATE INDEX idx_ingestion_assets_hostname_system ON ingestion_assets(hostname, system_id);
CREATE INDEX idx_ingestion_vulns_asset_severity ON ingestion_vulnerabilities(asset_uuid, severity);

-- Workflow performance
CREATE INDEX idx_workflow_instances_status_priority ON workflow_instances(status, priority);
```

---

## Data Types and Constraints

### Common Data Types Used
- **SERIAL**: Auto-incrementing integer primary keys
- **UUID**: Universally unique identifiers
- **VARCHAR(n)**: Variable character strings with length limits
- **TEXT**: Unlimited text fields
- **TIMESTAMP**: Date and time with timezone support
- **BOOLEAN**: True/false values
- **JSONB**: Binary JSON storage for flexible data
- **DECIMAL/NUMERIC**: Precise decimal numbers
- **INTEGER**: Whole numbers

### Constraint Patterns
- **NOT NULL**: Required fields
- **UNIQUE**: Unique value constraints
- **DEFAULT**: Default values for new records
- **FOREIGN KEY**: Referential integrity
- **CASCADE DELETE**: Automatic cleanup of related records

---

## Database Size and Performance Considerations

### Expected Data Volumes
- **Users**: Hundreds to thousands
- **Assets**: Tens of thousands to hundreds of thousands
- **Vulnerabilities**: Hundreds of thousands to millions
- **Workflow Executions**: Thousands to hundreds of thousands
- **AI Chat Messages**: Thousands to millions

### Performance Optimization
- Regular VACUUM and ANALYZE operations
- Index maintenance and monitoring
- Partition large tables by date if needed
- Archive old data periodically
- Monitor query performance and optimize slow queries

### Backup and Recovery
- Regular database backups
- Point-in-time recovery capability
- Data retention policies
- Disaster recovery procedures

---

## Schema Version Control

### Migration Strategy
- Use Drizzle ORM migrations for schema changes
- Version control all schema modifications
- Test migrations in development environment
- Rollback procedures for failed migrations

### Schema Evolution
- Backward compatibility considerations
- Data migration scripts for structural changes
- Feature flags for gradual rollouts
- Documentation updates with each change

This data dictionary provides comprehensive information about the RAS DASH database structure and serves as a reference for developers, administrators, and stakeholders working with the system.